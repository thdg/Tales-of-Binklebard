<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta charset="UTF-8">
        <title>Tales of Binklebard the adventurer: map editor</title>
        <script src="//use.edgefonts.net/irish-grover.js"></script>
        <link rel="stylesheet" type="text/css" href="../css/style.css">
        <style>
            canvas {
                cursor: pointer;
            }
            .blah {
                display: block;
                width: 800px;
                margin: 10px auto;
            }
            .blah > .map {
                margin-top: 10px;
                width: 795px;
                height: 200px;
            }
            h2 {
                color: #FFA500;
                text-align: center;
                margin: 0px;
            }
        </style>   
    </head>
    <body bgcolor="chucknorris">
        <h1 class="title">Map editor</h1>
        <canvas id="myCanvas" width="800" height="600">
            <p>Sorry, but your browser does not support the HTML5 canvas tag.</p>
        </canvas>

        <div class="blah">
        <h2>1: Grass, 2: Forest, 3: Water, 4: Path</h2>
        <h2>up/down arrow to change brush size</h2>
        <h2>export prints map in console since the textarea is fucked up...</h2>
            <textarea class="map"></textarea>
            <button id="import">Import</button>
            <button id="export">Export</button>
        </div>
        
        <!-- game engine stuff -->
        <script src="../js/engine/globals.js"></script>
        <script src="../js/engine/consts.js"></script>
        <script src="../js/engine/util.js"></script>
        <script src="../js/engine/keys.js"></script>
        <script src="../js/engine/handleMouse.js"></script>

        <script src="../js/engine/camera.js"></script>
        <script src="../js/engine/spatialManager.js"></script>
        <script src="../js/engine/renderingManager.js"></script>
        <script src="../js/engine/world.js"></script>
        <script src="../js/engine/Region.js"></script>

        <script src="../js/engine/update.js"></script>
        <script src="../js/engine/render.js"></script>
        <script src="../js/engine/main.js"></script>

        <script src="../js/engine/imagesPreload.js"></script>
        <script src="../js/engine/Sprite.js"></script>
        <script src="../js/engine/Tile.js"></script>
        <script src="../js/engine/tilesheet.js"></script>
        <script src="../js/assets/tiles.js"></script>
        <script src="../js/assets/Animation.js"></script>
        
        <!-- game specific stuff -->
        <script src="./util.js"></script>
        <script src="./mapEditor.js"></script>

        <script src="./EDITOR.js"></script>
        <script>
            document.getElementById('export').onclick = function() {
                var map = world.getMap();
                var map_string = map2string(map);
                console.log(map_string);
                //document.getElementsByClassName('map')[0].value = map;
            };
            document.getElementById('import').onclick = function() {
                var map_string = document.getElementsByClassName('map')[0].value;
                if (map_string.length === 0) {
                    alert("Can't import empty string, dummy!");
                    return;
                }
                var map = string2map(map_string);
                console.log(map);
                world.setMap(map);
            };
        </script>
    </body>
</html>